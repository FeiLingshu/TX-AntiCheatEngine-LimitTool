# TX-AntiCheatEngine-LimitTool `腾讯反作弊组件限制工具`  
> ## 目前反作弊组件会将限制行为定义为 `修改游戏客户端`，提示 `安全系统或数据被篡改`，在LOL测试环境下，会对游戏账号进行 `全区封禁5分钟` 的处罚，触发时机未知，触发频率未知
> ### 以下为目前的测试时间表

|时间节点|时间跨度|状态|
|:-:|:-:|:-|
|2025.9.16|累计4h+|全区封禁5min（22:00-23:00间触发）|
|2025.9.17|累计4h+|全区封禁5min（22:00-23:00间触发）|
|2025.9.26|累计4h+|未受到处罚|
|2025.10.2|累计2h+|未受到处罚|
|2025.10.3|累计2h+|未受到处罚|
|2025.10.4|累计1h+|全区封禁5min（12:00-13:00间触发）|
|2025.10.9|累计3h+|未受到处罚|
|2025.10.14|累计4h+|全区封禁5min*3（2:00-3:00间触发）<br/><ul><li>2:03-2:07</li><li>2:19-2:24</li><li>2:35-2:40</li><li>疑似击杀太多且没死几次，不知道为啥被检测这么频繁</li></ul>|

> ### 鉴于当前情况，建议谨慎使用

</br>

> ### 本程序仅通过Windows系统原始功能对腾讯反作弊组件进程添加性能限制，无法也永远不会实现削弱或彻底关闭反作弊功能，请各位玩家绿色游戏，不要尝试使用本程序绕过反作弊系统，维护良好游戏环境，从你我做起

> ### _新添加功能：_
> - [x] _收到部分观众反馈：配置CPU逻辑处理器亲和性的默认逻辑可能导致反作弊被分配到体质较好的核心上，该问题普遍出现于`AMD`和`不具有大小核架构的Intel`平台_
> - [x] _新功能允许用户使用本地配置文件对CPU逻辑处理器亲和性进行配置，如果配置信息有误或用户未创建配置文件，则程序将以默认逻辑运行_
> - [ ] _配置方法请[前往这里](https://www.bilibili.com/video/BV1dLfPYsEHx)的`置顶评论`进行查看_

> ### _新添加功能：_
> - [x] _收到部分观众反馈：反作弊组件似乎会不定期检查其工作环境，并重新配置其系统调度参数；为适配该问题，程序添加了一个定时循环，在侦测到反作弊相关进程后，除第一次设置外，每1分钟会重新配置一遍系统调度参数，届时会产生极其微小的性能开销（每1分钟执行一次耗时＜5ms的代码，你说呢：），且由于无法获知反作弊组件执行重置的具体时间节点，最多可能存在 59s 999ms 的配置真空期_
> - [x] _经过测试证实：反作弊组件并非通过调用系统函数修改自身调度参数，而是通过其他手段（目前怀疑反作弊程序会重启自身进程，但无法证实），程序代码已添加一个新的功能，该功能实现在检测到反作弊进程存在被关闭的动作时，自动追踪并更新进程ID，并立即重新配置其调度参数_
> - [ ] _如果⬆️功能依旧无法稳定修复该问题，那说明TX大概率开发了一种功能用来对抗修改系统调度参数的操作，这样的话我也没有什么更好的办法了_
> - [ ] _如果不想使用该新功能，请[前往这里](https://github.com/FeiLingshu/TX-AntiCheatEngine-LimitTool/releases/tag/1.1.1.1-Fix3)下载最后一个不具有该功能的版本_
> - [ ] _注意：Pre-release版本不提供旧版本，因此，如果不想使用该新功能，将同时无法使用Pre-release中提供的功能_
> - [ ] _以防⬆️产生任何误解，特此说明：包含该新功能但不包含Pre-release相关功能的版本将正常提供_

> ### _最新Pre-release说明：_
> - [x] _添加了新的功能，通过调用 `Windows JobObject` 实现限制程序CPU工作队列周期，达到限制CPU使用率的目的（目标CPU工作队列周期被限制在1~100，目标CPU使用率可维持1%~5%，最大应不会超过10%）_
> - [ ] _可能由于CPU任务队列堆积导致反作弊检查超时，进而导致游戏弹窗提示环境异常，如遇此问题请使用正式版本而非Pre-release版本_
> - [ ] _由于限制了CPU工作队列周期，导致某些本应该瞬态完成的大型任务被分散在了多个工作周期中，导致实际显示在任务管理器中的CPU占用（大多数反作弊组件低负载的时间内）比之前正式版本的程序要高（举个例子：正式版本低负载时占用0.5%左右时，若使用Pre-release版本则会上升至1.5%），但使用Pre-release版本可以有效控制可能出现的高负载情况_
>
> ### _`注意：Pre-release版本对反作弊组件的处理方式非常激进，如果导致游戏进程无法正常进行，请回退至正式版本！如使用正式版本依旧无法正常进行游戏，请准备好你最具攻击性的措辞，以最激烈的方式咒骂TX的ACE反作弊组件`_

# 程序功能  
- [x] 实现自动检测反作弊相关进程  
- 通过事件触发机制对反作弊组件的启动和关闭进行相应，不进行高频循环，在系统空闲时不会产生额外的性能开销  
- 需确认系统中是否存在AntiCheatExpert Service服务  
</br>

- [x] 高强度容错处理  
- 任意时间节点启动本程序，均可实现对相应进程进行处理（依然建议开机自启）  
- 即使启动时未安装任何腾讯游戏，导致系统中不存在AntiCheatExpert Service服务，程序也不会退出，而是进入后台静默状态，安装任意游戏导致安装AntiCheatExpert Service服务时，程序会由产生的系统事件自动唤醒  
</br>

- [x] 限制进程优先级为最低  
- 通过限制进程优先级，保证前台程序（例如游戏，听歌软件，浏览器等）流畅运行  
</br>

- [x] 自动根据计算机配置设置处理器核心相关性  
- 限制程序只能利用一个或少数几个CPU核心，以限制其处理数据的能力  
- 程序会根据计算机CPU情况，自动分配核心，如果CPU为Intel大小核架构，会将所有小核产生的逻辑处理器分配给反作弊进程（此举是为了保证反作弊进程稳定运行，如果只分配一个小核，有可能会出现小核处理能力差导致任务积压，反作弊进程响应速度过慢，造成游戏弹窗），如果CPU关闭了小核/禁用了Intel超线程技术/非大小核架构，会仅将最后一个逻辑处理器分配给反作弊进程  
- 如果你的CPU能够产生超过64个逻辑处理器（去任务管理器里数框框），请不要使用本程序，微软未对这种情况做良好支持，若强行添加支持会影响程序运行的稳定性，详见[MSDN](https://learn.microsoft.com/zh-cn/windows/win32/api/winbase/nf-winbase-setprocessaffinitymask?redirectedfrom=MSDN#remarks)相关页面  
</br>

- [x] 配置进程模式为效能模式  
- 限制进程提升CPU频率以获取更快运行速度的请求，并限制进程计时器分辨率，最大限度降低进程在操作系统中的优先级  
- 该功能为核心功能，对反作弊进程的活动产生的限制最大  
- 在Windows 11 22H2前，由于不存在效能模式，操作系统会自动将请求降级为低能耗模式，该模式无法达到与效能模式相同的效果，但依旧能对进程进行有效限制（仍推荐Windows 11 22H2版本及以上），详见[MSDN](https://learn.microsoft.com/zh-cn/windows/win32/api/processthreadsapi/nf-processthreadsapi-setprocessinformation#remarks)相关页面  
</br>

# 安装方式
> ### 程序可执行文件在任意位置均可运行，但依然推荐使用Windows任务计划程序配置开启启动，具体配置方式详见[bilibili](https://www.bilibili.com/video/BV1dLfPYsEHx)相关视频



<br></br>
___
> ### **_本程序由作者本人（即 FeiLingshu）原创编写。_**
